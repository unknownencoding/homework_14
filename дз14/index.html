<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>дз14</title>
</head>
<body>
    <script>
// Задача 1. Описати масив об’єктів – сайтів розроблених компанією з такими властивостями
// ----- Властивості ------
// назва компанії на час розробки (назву періодично змінюють)
// власник компанії
// споснсори (масив спонсорів)
//              * прізвище спонсора
//       * ім’я  спонсора
//       * сума вкладень спонсора
// рік випуску
// вартість сайту
// Знайти:
// 1) загальну вартість усіх сайтів
// 2) кількість сайтів, що було зроблено між 2000 та 2009 рр.
// 3) кількість сайтів, де сума спонсорських вкладень була більшою за 100000
// 4) створити загальний список усіх спонсорів (поки можуть повторюватись, просто зібрати усі у масив)
// 5) знайти рік, коли прибуток був найбільшим
// 6) упорядкувати список за спаданням прибутку
// 7) Створити 2 окремих списки з копіями об’єктів, що містять сайти з вартість до 10000 і більше 10000


let sites = [
    { 
    nameCompany:'Ababagalamaga',
    ownerCompany:'Gregory',
    sponsorCompany: [
        {lastName:'Petrov', firstName:'Piter', sponsorInvestSum:1550},
            {lastName:'Ivanov',firstName:'Ivan', sponsorInvestSum:87800},
        { lastName:'Блюме', firstName: 'Оливер', sponsorInvestSum:1150}

    ],
    outputYear:1999,
    sitePrice:8500,
    },
    { 
    nameCompany:'ГП_Антонов',
    ownerCompany: 'Олег Константинович Антонов',
    sponsorCompany:[
        {lastName:'Ivanov',firstName:'Ivan', sponsorInvestSum:87800},
            {lastName:'Petrov', firstName:'Piter', sponsorInvestSum:1550},
        { lastName:'Блюме', firstName: 'Оливер', sponsorInvestSum:1150},
        {lastName:'Кэнъитиро',firstName:'Ёсида',sponsorInvestSum: 78500,}

    ],
    outputYear:2005,
    sitePrice:11500,
    },
    {
    nameCompany:'Automobili Lamborghini S.p.A.',
    ownerCompany:'Ферруччо Ламборгини',
    sponsorCompany:[
        { lastName:'Блюме', firstName: 'Оливер', sponsorInvestSum:11500},
            {lastName:'Petrov', firstName:'Piter', sponsorInvestSum:15500},
        {lastName:'Ivanov',firstName:'Ivan', sponsorInvestSum:878000},
        {lastName:'Кэнъитиро',firstName:'Ёсида',sponsorInvestSum: 785000,}

    ],
    outputYear: 2018,
    sitePrice:88000,
    },
    {
    nameCompany:'Sony Group Corporation',
    ownerCompany:'Масару Ибука',
    sponsorCompany:[
        {lastName:'Кэнъитиро',firstName:'Ёсида',sponsorInvestSum: 7850,},
            {lastName:'Petrov', firstName:'Piter', sponsorInvestSum:1550},
        {lastName:'Ivanov',firstName:'Ivan', sponsorInvestSum:8780},
        { lastName:'Блюме', firstName: 'Оливер', sponsorInvestSum:1150}

    ],
    outputYear: 2001,
    sitePrice: 15000,
    },
]

// // // 1) загальну вартість усіх сайтів
//  let totalPrice = sites.reduce(
//         (prevSum, element) => prevSum + element.sitePrice, 0)
//      
// document.write(`загальнa вартість усіх сайтів = ${totalPrice}<br>`)

// //==========
// //1-ПРАЦЮЄ!
// //==========

// // 2) кількість сайтів, що було зроблено між 2000 та 2009 рр.
// let num_2000_09 = sites.reduce(
//    ( prevNum, site) => (site.outputYear>2000 && site.outputYear<2009) ? prevNum = prevNum+1 : prevNum, 0
// )
// document.write(`кількість сайтів, що було зроблено між 2000 та 2009 рр. = ${num_2000_09}<br>`)

//==========
//2-ПРАЦЮЄ!
//==========

// // 3) кількість сайтів, де сума спонсорських вкладень була більшою за 100000
// const sitesWithHighInvestment = sites.reduce((accumulator, currentSite) => {
//   const totalInvestment = currentSite.sponsorCompany.reduce((total, sponsor) => {
//     return total + sponsor.sponsorInvestSum;
//   }, 0);
//   if (totalInvestment > 100000) {
//     return accumulator + 1;
//   } else {
//     return accumulator;
//   }
// }, 0);

// document.write(`кількість сайтів, де сума спонсорських вкладень була більшою за 100000: ${sitesWithHighInvestment}`);

//==========
//3-ПРАЦЮЄ!?
//==========

//===
// // 4) створити загальний список усіх спонсорів (поки можуть повторюватись, просто зібрати усі у масив)
// var allSponsors = sites.map(function(site) {
//   return site.sponsorCompany.map(function(sponsor) {
//     return sponsor.lastName + ' ' + sponsor.firstName;
//   });
// });
// document.write(allSponsors)
// =======або:

// for (const site of sites) {//проходимо по всіх об'єктах у масиві sites,
//   for (const sponsor of site.sponsorCompany) { //потім по всіх об'єктах в масиві sponsorCompany в кожному сайті
//     document.write(`${sponsor.lastName} ${sponsor.firstName} <br>`); //і виводимо список всіх lastName і firstName кожного спонсора
//   }
// }
// =====

//==========
//4-ПРАЦЮЄ!
//==========


// 5) знайти рік, коли прибуток був найбільшим
// let siteWithMaxPrice = sites.reduce((maxPriceSite, currentSite) => {
//   if (currentSite.sitePrice > maxPriceSite.sitePrice) {
//     return currentSite;
//   }
//   return maxPriceSite;
// });

// console.log(siteWithMaxPrice.outputYear);

//==========
//5-ПРАЦЮЄ!?
//==========

// 6) упорядкувати список за спаданням прибутку
// let sortedSites = sites.sort((a, b) => b.sponsorCompany.reduce(
//     (sum, sponsor) => sum + sponsor.sponsorInvestSum, 0) - a.sponsorCompany.reduce(
//         (sum, sponsor) => sum + sponsor.sponsorInvestSum, 0));
// console.log(sortedSites);

//==========
//6-ПРАЦЮЄ!?
//==========

// 7) Створити 2 окремих списки з копіями об’єктів, що містять сайти з вартість до 10000 і більше 10000

// let lowPrice = [];
// lowPrice = JSON.parse(JSON.stringify(sites.filter((site) => site.sitePrice <= 10000)));

// console.log(lowPrice)
// document.write(lowPrice)


// let highPrice = [];
// highPrice = JSON.parse(JSON.stringify(sites.filter((site) => site.sitePrice >10000)));

// console.log(highPrice)
// document.write(highPrice);

//         //=============....>>> вар-т 2
//         // Список об'єктів зі значеннями sitePrice менше 10000
//         const lessThanTenThousand = sites.filter(site => site.sitePrice < 10000).map(site => Object.assign({}, site));

//         // Список об'єктів зі значеннями sitePrice більше 10000
//         const moreThanTenThousand = sites.filter(site => site.sitePrice > 10000).map(site => Object.assign({}, site));


//         document.write(`<p> cписок обє'ктів зі значеннями sitePrice менше 10000:</p>`);
//         document.write('<ul>');
//         lessThanTenThousand.forEach(site => {
//         document.write('<li>' + site.nameCompany + '</li>');
//         });
//         document.write('</ul>');

//         document.write(`<p> cписок обє'ктів зі значеннями sitePrice більше  10000:</p>`);
//         document.write('<ul>');
//         moreThanTenThousand.forEach(site => {
//         document.write('<li>' + site.nameCompany + '</li>');
//         });
//         document.write('</ul>');

// //==========
//7-ПРАЦЮЄ!
//==========

// Задача 2. Розробити функцію, у яку передають об’єкт (день, місяць, рік). Визначити, який буде рік через N місяців.

// let userDate = {
//         day: 23,
//         month: 5,
//         year: 2023,
//       }

//       // function getShiftedMonth(userDate, N) {
//       //   return ((userDate.month - 1 + N) % 12) + 1
//       // }
//       function getShiftedMonth({ month }, N) {
//         //      (currentValue - min +N)%(max-min+1) +min    //min=1, max =12
//         return ((month - 1 + N) % 12) + 1
//       }

//       const N = parseInt(prompt('N='))
//       const shiftedMonth = getShiftedMonth(userDate, N)
//       alert(`Через місяців ${N} буде місяць № ${shiftedMonth}`)



// let userDate = {
//         day: 23,
//         month: 5,
//         year: 2023,
// }
// function getShiftedMonth(userDate, N) {
// return ((userDate.year - 1 + N) % 12) + 1
//  }

//       const N = parseInt(prompt('N='))
//       const shiftedMonth = getShiftedMonth(userDate, N)
//       alert(`Через  ${N} місяців буде рік № ${shiftedMonth}`)


//beispiel// Задача. Розробити функцію, у яку передають об’єкт (день, місяць, рік). Визначити, який буде місяць через N місяців.
//       let userDate = {
//         day: 23,
//         month: 5,
//         year: 2023,
//       }
// alert('day' in userDate)



      // function getShiftedMonth(userDate, N) {
      //   return ((userDate.month - 1 + N) % 12) + 1
      // }
    //   function getShiftedMonth({ month }, N) {
    //     //      (currentValue - min +N)%(max-min+1) +min    //min=1, max =12
    //     return ((month - 1 + N) % 12) + 1
    //   }

    //   const N = parseInt(prompt('N='))
    //   const shiftedMonth = getShiftedMonth(userDate, N)
      // alert(`Через місяців ${N} буде місяць № ${shiftedMonth}`)




// Задача 3. Ось приклад відповіді з одного з сайтів (масив об’єктів з інформацією про товари) 
// (весь текст масиву, що в кінці документу скопіюєте в код). 
// 1) Загальну вартість (нові ціни - price)
// 2)Знайти кількість товарів, у яких ціна зменшилась (price < old_price).
// 3) Товари, які доступні (sell_status:"available")
// 4) сформувати новий список об”єктів тільки доступних  для продажу товарів, які міститимуть тільки ідентифікатор товару (id), нову ціну (price), стару ціну (old_price), та ціну у доларах (usd_price)

let dataList = [{"id":344277463,"old_price":1395,"old_usd_price":"37.70","price":1099,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"29.70","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":363766641,"old_price":0,"old_usd_price":"0.00","price":90,"min_month_price":0,"sell_status":"unavailable","status":"active","usd_price":"2.43","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":339273715,"old_price":38,"old_usd_price":"1.03","price":25,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"0.68","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":330746665,"old_price":3087,"old_usd_price":"83.43","price":2548,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"68.86","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":344972806,"old_price":699,"old_usd_price":"18.89","price":549,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"14.84","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":318302299,"old_price":0,"old_usd_price":"0.00","price":8500,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"229.73","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":361430565,"old_price":3500,"old_usd_price":"94.59","price":1999,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"54.03","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":14429030,"old_price":3339,"old_usd_price":"90.24","price":2999,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"81.05","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":56340912,"old_price":2094,"old_usd_price":"56.59","price":1776,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"48.00","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":315292225,"old_price":1799,"old_usd_price":"48.62","price":1499,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"40.51","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":28437961,"old_price":42999,"old_usd_price":"1162.14","price":33999,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"918.89","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":339896833,"old_price":6399,"old_usd_price":"172.95","price":5899,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"159.43","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":364354149,"old_price":1600,"old_usd_price":"43.24","price":1500,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"40.54","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":{"id":106,"discount_price":1300,"title":"ціна по промокоду діє з 22.03 по 28.03","price_show_in_site_id":5151,"show_in_details":1,"show_in_catalog":1,"is_description":1,"description":"<body>\r<style>.popup-addprice-description h2 {display: none;}</style>\r<div class=\"cat-promo-i clearfix\">\r<h4 class=\"cat-promo-title\">Промокод на знижку</h4>\r<h2 style=\"font-size: 30px; color: #FB515D; display: inline-block; padding: 8px 16px; line-height: 35px; border: 2px dashed; border-radius: 5px;\">CYCC-MRKT-STRS-2245</h2>\r<div>\r<span class=\"btn-link btn-link-green\"><a href=\"https://rozetka.com.ua/ua/promo/allgalaxies/\" class=\"btn-link-i\" style=\"padding: 8px 16px; font-size: 17px; line-height: 20px;\">Більше товарів зі знижками</a></span>\r</div>\r</div>\r<div class=\"cat-promo-g-i-wrapper clearfix\">\r<div class=\"cat-promo-i clearfix\">\r<div class=\"cat-promo-desc\">\r<h4 class=\"cat-promo-title-small\">Як активувати промокод:</h4>\r<p> 1. Скопіюйте промокод.</p>\r<p>2. Додайте товар у кошик і перейдіть до оформлення товару. У вікні оформлення під сумою замовлення ви побачите посилання «Ввести промокод».</p>\r<p>3. Введіть промокод у полі, що з’явиться, і натисніть кнопку «Застосувати».</p><span></span>\r</div>\r</div>\r<div class=\"cat-promo-i clearfix\">\r<div class=\"cat-promo-desc\">\r<h4 class=\"cat-promo-title-small\">Під час застосування промокоду:</h4>\r<p>1. «Оплата частинами» та «Кредит 0%» без страхування не діють.</p>\r<p>2. Подарунки не входять у вартість і доступні лише при купівлі за ціною, що на сайті.</p><span></span>\r</div>\r</div>\r</div>\r\r</body>","promo_code":"","url_for_image":"https://rozetka.com.ua/ua/promo/allgalaxies/","images":"","images_mobile":"","hide_price":0}},{"id":363184995,"old_price":0,"old_usd_price":"0.00","price":4499,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"121.59","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":98077846,"old_price":0,"old_usd_price":"0.00","price":3113,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"84.14","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":310694668,"old_price":0,"old_usd_price":"0.00","price":3000,"min_month_price":0,"sell_status":"unavailable","status":"active","usd_price":"81.08","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":362812029,"old_price":0,"old_usd_price":"0.00","price":21700,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"586.49","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":361422708,"old_price":4100,"old_usd_price":"110.81","price":2699,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"72.95","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":318302257,"old_price":0,"old_usd_price":"0.00","price":8500,"min_month_price":0,"sell_status":"unavailable","status":"active","usd_price":"229.73","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":310694498,"old_price":0,"old_usd_price":"0.00","price":2963,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"80.08","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":363651273,"old_price":5199,"old_usd_price":"140.51","price":4890,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"132.16","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":330747022,"old_price":3087,"old_usd_price":"83.43","price":2606,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"70.43","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":362617635,"old_price":4872,"old_usd_price":"131.68","price":2436,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"65.84","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null},{"id":363614439,"old_price":5199,"old_usd_price":"140.51","price":4890,"min_month_price":0,"sell_status":"available","status":"active","usd_price":"132.16","pl_charge_pcs":0,"pl_use_instant_bonus":false,"pl_premium_bonus_charge_pcs":0,"rests":-1,"min_price":0,"max_price":0,"has_shops":false,"info":null,"show_in_site":null}]
// // 1) Загальну вартість (нові ціни - price)
//       const totalMoneyPrice = dataList.reduce(
//         (prevSum, element) => prevSum + element.price,
//         0
//       )
//       document.write(`Задача 3. 1) загальнa вартість => ${totalMoneyPrice}`)

//==========
//3.1-ПРАЦЮЄ!
//==========

// 2)Знайти кількість товарів, у яких ціна зменшилась (price < old_price).
// let calcPositionPriceDecreased = 0;
// for (let i = 0; i < dataList.length; i++) {
//     if (dataList[i].price < dataList[i].old_price) {
//     calcPositionPriceDecreased++;
//   }
// }
// console.log(calcPositionPriceDecreased);

// //==========
// //3.2-ПРАЦЮЄ!
// //==========


// ===
// // 3) Товари, які доступні (sell_status:"available")
// let newList_statusAV = dataList.filter((element)=>element.sell_status === "available")
// console.log(newList_statusAV)

// //==========
// //3.3-ПРАЦЮЄ!
// //==========


// // 4) сформувати новий список об”єктів тільки доступних  для продажу товарів, які міститимуть тільки ідентифікатор товару (id), нову ціну (price), стару ціну (old_price), та ціну у доларах (usd_price)
// // вирішувати " for of "  !!!

// let newObjektList = []
// for (const iterator of dataList) { //для перебору всіх об'єктів у вихідному списку
//         let newList = { //кожному об'єкту ми створюємо новий об'єкт тільки з потрбеими нам елементами
//                id: iterator.id,
//             price: iterator.price,
//         old_price: iterator.old_price,   
//         usd_price: iterator.usd_price,
//         }
// newObjektList.push(newList) // пушим новый объект newList в новый список об'єктів newObjektList
// }
// console.log(newObjektList); 

// //==========
// //3.4-ПРАЦЮЄ!
// //==========

 
    </script>
</body>
</html>